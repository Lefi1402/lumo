System.register(["./index-legacy-Cgac9eAH.js","./photoService-legacy-yTgKtC9p.js"],function(e,l){"use strict";var t,a,o,n,u,c,i,s,d,r,h,f,m,_,p,v,y,g,k,b,w,D,C,P,x,V,E,L,j,z,A,B,M,N,F,S,G,I,O,U,q,H,J,K,W;return{setters:[e=>{t=e._,a=e.d,o=e.r,n=e.w,u=e.c,c=e.u,i=e.I,s=e.a,d=e.b,r=e.e,h=e.f,f=e.g,m=e.h,_=e.i,p=e.j,v=e.k,y=e.l,g=e.m,k=e.n,b=e.o,w=e.p,D=e.q,C=e.s,P=e.t,x=e.v,V=e.x,E=e.y,L=e.z,j=e.A,z=e.B,A=e.C,B=e.D,M=e.E,N=e.F,F=e.G,S=e.H,G=e.J,I=e.K,O=e.L,U=e.M,q=e.N},e=>{H=e.r,J=e.C,K=e.d,W=e.l}],execute:function(){var Q=document.createElement("style");Q.textContent=".detail-img[data-v-7b98a278]{width:100%;height:auto}\n",document.head.appendChild(Q);const R=H("PhotoEditor",{web:()=>t(()=>l.import("./web-legacy-CXIs2uRk.js"),void 0).then(e=>new e.PhotoEditorWeb)}),T=["src"],X=((e,l)=>{const t=e.__vccOpts||e;for(const[a,o]of l)t[a]=o;return t})(a({__name:"PhotoDetailModal",props:{modelValue:{type:Boolean},photo:{}},emits:["update:modelValue","deleted","edited"],setup(e,{emit:l}){const t=e,a=l,E=o(t.modelValue),L=o(!1),j="android"===J.getPlatform();function z(){E.value=!1}async function A(){if(j&&t.photo)try{const e=R,{path:l}=await e.edit({path:t.photo.webPath});l&&(t.photo.webPath=l,a("edited"))}catch(e){console.error("Edit failed:",e)}}function B(){L.value=!0}n(()=>t.modelValue,e=>E.value=e),n(E,e=>a("update:modelValue",e));const M=[{text:"Abbrechen",role:"cancel"},{text:"Löschen",role:"destructive",handler:async()=>{t.photo&&(await K(t.photo.fileName),a("deleted"),z())}}];return(e,l)=>(V(),u(c(i),{"is-open":E.value,onDidDismiss:z},{default:s(()=>[d(c(r),null,{default:s(()=>[d(c(f),null,{default:s(()=>[d(c(m),null,{default:s(()=>[d(c(_),{slot:"start"},{default:s(()=>[d(c(p),{onClick:z},{default:s(()=>[d(c(v),{icon:c(y)},null,8,["icon"])]),_:1})]),_:1}),d(c(g),{class:"lumo-title-center"},{default:s(()=>l[1]||(l[1]=[k("Foto",-1)])),_:1,__:[1]})]),_:1})]),_:1}),e.photo?(V(),u(c(b),{key:0,scroll:"vertical"},{default:s(()=>[w("img",{src:e.photo.webPath,class:"detail-img"},null,8,T)]),_:1})):h("",!0),e.photo?(V(),u(c(D),{key:1},{default:s(()=>[d(c(m),null,{default:s(()=>[j?(V(),u(c(_),{key:0,slot:"start"},{default:s(()=>[d(c(p),{fill:"clear",onClick:A},{default:s(()=>[d(c(v),{icon:c(C)},null,8,["icon"]),l[2]||(l[2]=k(" Bearbeiten ",-1))]),_:1,__:[2]})]),_:1})):h("",!0),d(c(_),{slot:"end"},{default:s(()=>[d(c(p),{color:"danger",fill:"clear",onClick:B},{default:s(()=>[d(c(v),{icon:c(P)},null,8,["icon"]),l[3]||(l[3]=k(" Löschen ",-1))]),_:1,__:[3]})]),_:1})]),_:1})]),_:1})):h("",!0)]),_:1}),d(c(x),{"is-open":L.value,header:"Foto löschen?",message:"Diese Aktion kann nicht rückgängig gemacht werden.",buttons:M,onDidDismiss:l[0]||(l[0]=e=>L.value=!1)},null,8,["is-open"])]),_:1},8,["is-open"]))}}),[["__scopeId","data-v-7b98a278"]]),Y={key:0,class:"lumo-empty-gallery"},Z={key:1,class:"lumo-empty-gallery"},$={key:2},ee={class:"month-header"};e("default",a({__name:"GalleryPage",setup(e){const l=o([]),t=o(!0),a=o(!1),n=o(null),i=M();async function h(){t.value=!0,l.value=await W(),t.value=!1}E(h);const _=L(()=>{const e=new Map;for(const t of l.value){const l=new Date(t.date).toLocaleDateString("de-DE",{month:"long",year:"numeric"});(e.get(l)||e.set(l,[]).get(l)).push(t)}return Array.from(e.entries())}),p=()=>i.push("/tabs/camera");return(e,o)=>(V(),u(c(r),null,{default:s(()=>[d(c(f),null,{default:s(()=>[d(c(m),null,{default:s(()=>[d(c(g),{class:"lumo-title-center"},{default:s(()=>o[1]||(o[1]=[k("LUMO",-1)])),_:1,__:[1]})]),_:1})]),_:1}),d(c(b),{fullscreen:!0},{default:s(()=>[t.value?(V(),j("div",Y,[d(c(z),{name:"crescent"})])):0===l.value.length?(V(),j("div",Z,[d(c(A),{vertical:"center",horizontal:"center",slot:"fixed"},{default:s(()=>[d(c(B),{class:"fab-white",onClick:p},{default:s(()=>[d(c(v),{icon:c(N)},null,8,["icon"])]),_:1})]),_:1}),o[2]||(o[2]=w("p",{class:"lumo-empty-text"},[k(" Noch keine Bilder"),w("br"),k("hinzugefügt ")],-1))])):(V(),j("div",$,[(V(!0),j(F,null,S(_.value,([e,l])=>(V(),j("div",{key:e,class:"month-block"},[w("h4",ee,G(e),1),d(c(I),null,{default:s(()=>[d(c(O),null,{default:s(()=>[(V(!0),j(F,null,S(l,e=>(V(),u(c(U),{key:e.fileName,size:"4",class:"p-0",onClick:l=>{return t=e,n.value=t,void(a.value=!0);var t}},{default:s(()=>[d(c(q),{src:e.webPath},null,8,["src"])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)]))),128))])),d(X,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),photo:n.value,onDeleted:h,onEdited:h},null,8,["modelValue","photo"])]),_:1})]),_:1}))}}))}}});
