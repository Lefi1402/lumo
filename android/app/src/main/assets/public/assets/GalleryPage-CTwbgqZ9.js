const __vite__fileDeps=["assets/web-_7YWtnOF.js","assets/photoService-zMGk2de_.js","assets/index-Bs_OvxHx.js","assets/index-Ds6Nf19-.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as T,d as N,r as m,w as E,c as _,u as e,I as z,a as o,b as t,e as O,f as b,g as F,h as V,i as C,j as D,k,l as $,m as L,n as h,o as M,p as y,q as G,s as R,t as S,v as H,x as s,y as U,z as W,A as p,B as j,C as q,D as J,E as K,F as Q,G as x,H as A,J as X,K as Y,L as Z,M as ee,N as te}from"./index-Bs_OvxHx.js";import{r as oe,C as le,d as ae,l as ne}from"./photoService-zMGk2de_.js";const se=oe("PhotoEditor",{web:()=>T(()=>import("./web-_7YWtnOF.js"),__vite__mapDeps([0,1,2,3])).then(d=>new d.PhotoEditorWeb)}),re=["src"],ue=N({__name:"PhotoDetailModal",props:{modelValue:{type:Boolean},photo:{}},emits:["update:modelValue","deleted","edited"],setup(d,{emit:c}){const n=d,r=c,u=m(n.modelValue),v=m(!1),f=le.getPlatform()==="android";E(()=>n.modelValue,l=>u.value=l),E(u,l=>r("update:modelValue",l));function g(){u.value=!1}async function I(){if(!(!f||!n.photo))try{const l=se,{path:a}=await l.edit({path:n.photo.webPath});a&&(n.photo.webPath=a,r("edited"))}catch(l){console.error("Edit failed:",l)}}function P(){v.value=!0}const i=[{text:"Abbrechen",role:"cancel"},{text:"Löschen",role:"destructive",handler:async()=>{n.photo&&(await ae(n.photo.fileName),r("deleted"),g())}}];return(l,a)=>(s(),_(e(z),{"is-open":u.value,onDidDismiss:g},{default:o(()=>[t(e(O),null,{default:o(()=>[t(e(F),null,{default:o(()=>[t(e(V),null,{default:o(()=>[t(e(C),{slot:"start"},{default:o(()=>[t(e(D),{onClick:g},{default:o(()=>[t(e(k),{icon:e($)},null,8,["icon"])]),_:1})]),_:1}),t(e(L),{class:"lumo-title-center"},{default:o(()=>a[1]||(a[1]=[h("Foto",-1)])),_:1,__:[1]})]),_:1})]),_:1}),l.photo?(s(),_(e(M),{key:0,scroll:"vertical"},{default:o(()=>[y("img",{src:l.photo.webPath,class:"detail-img"},null,8,re)]),_:1})):b("",!0),l.photo?(s(),_(e(G),{key:1},{default:o(()=>[t(e(V),null,{default:o(()=>[f?(s(),_(e(C),{key:0,slot:"start"},{default:o(()=>[t(e(D),{fill:"clear",onClick:I},{default:o(()=>[t(e(k),{icon:e(R)},null,8,["icon"]),a[2]||(a[2]=h(" Bearbeiten ",-1))]),_:1,__:[2]})]),_:1})):b("",!0),t(e(C),{slot:"end"},{default:o(()=>[t(e(D),{color:"danger",fill:"clear",onClick:P},{default:o(()=>[t(e(k),{icon:e(S)},null,8,["icon"]),a[3]||(a[3]=h(" Löschen ",-1))]),_:1,__:[3]})]),_:1})]),_:1})]),_:1})):b("",!0)]),_:1}),t(e(H),{"is-open":v.value,header:"Foto löschen?",message:"Diese Aktion kann nicht rückgängig gemacht werden.",buttons:i,onDidDismiss:a[0]||(a[0]=B=>v.value=!1)},null,8,["is-open"])]),_:1},8,["is-open"]))}}),ie=(d,c)=>{const n=d.__vccOpts||d;for(const[r,u]of c)n[r]=u;return n},de=ie(ue,[["__scopeId","data-v-7b98a278"]]),ce={key:0,class:"lumo-empty-gallery"},fe={key:1,class:"lumo-empty-gallery"},pe={key:2},me={class:"month-header"},ge=N({__name:"GalleryPage",setup(d){const c=m([]),n=m(!0),r=m(!1),u=m(null),v=K();async function f(){n.value=!0,c.value=await ne(),n.value=!1}U(f);const g=W(()=>{const i=new Map;for(const l of c.value){const a=new Date(l.date).toLocaleDateString("de-DE",{month:"long",year:"numeric"});(i.get(a)||i.set(a,[]).get(a)).push(l)}return Array.from(i.entries())}),I=()=>v.push("/tabs/camera");function P(i){u.value=i,r.value=!0}return(i,l)=>(s(),_(e(O),null,{default:o(()=>[t(e(F),null,{default:o(()=>[t(e(V),null,{default:o(()=>[t(e(L),{class:"lumo-title-center"},{default:o(()=>l[1]||(l[1]=[h("LUMO",-1)])),_:1,__:[1]})]),_:1})]),_:1}),t(e(M),{fullscreen:!0},{default:o(()=>[n.value?(s(),p("div",ce,[t(e(j),{name:"crescent"})])):c.value.length===0?(s(),p("div",fe,[t(e(q),{vertical:"center",horizontal:"center",slot:"fixed"},{default:o(()=>[t(e(J),{class:"fab-white",onClick:I},{default:o(()=>[t(e(k),{icon:e(Q)},null,8,["icon"])]),_:1})]),_:1}),l[2]||(l[2]=y("p",{class:"lumo-empty-text"},[h(" Noch keine Bilder"),y("br"),h("hinzugefügt ")],-1))])):(s(),p("div",pe,[(s(!0),p(x,null,A(g.value,([a,B])=>(s(),p("div",{key:a,class:"month-block"},[y("h4",me,X(a),1),t(e(Y),null,{default:o(()=>[t(e(Z),null,{default:o(()=>[(s(!0),p(x,null,A(B,w=>(s(),_(e(ee),{key:w.fileName,size:"4",class:"p-0",onClick:_e=>P(w)},{default:o(()=>[t(e(te),{src:w.webPath},null,8,["src"])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)]))),128))])),t(de,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value=a),photo:u.value,onDeleted:f,onEdited:f},null,8,["modelValue","photo"])]),_:1})]),_:1}))}});export{ge as default};
