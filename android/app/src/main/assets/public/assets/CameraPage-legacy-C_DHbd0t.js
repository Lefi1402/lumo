System.register(["./index-legacy-Cgac9eAH.js","./photoService-legacy-yTgKtC9p.js"],function(e,a){"use strict";var l,t,n,c,s,u,i,r,o,v,d,f,g,m,h,y,p,_,w,k,b,C,j,x;return{setters:[e=>{l=e.d,t=e.r,n=e.O,c=e.P,s=e.y,u=e.c,i=e.a,r=e.u,o=e.e,v=e.b,d=e.h,f=e.m,g=e.n,m=e.g,h=e.p,y=e.A,p=e.f,_=e.k,w=e.Q,k=e.o,b=e.E,C=e.x},e=>{j=e.l,x=e.s}],execute:function(){const a={class:"camera-controls"},M={class:"camera-slot"},O=["src"],P={class:"camera-slot"};e("default",l({__name:"CameraPage",setup(e){const l=b(),R=t(null),S=t(null),U=t(null),D=t(null),E=t("environment");async function L(){A();try{U.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:E.value}}),R.value&&(R.value.srcObject=U.value)}catch(e){console.error("Kameraâ€‘Start fehlgeschlagen:",e)}}function A(){var e;null===(e=U.value)||void 0===e||e.getTracks().forEach(e=>e.stop())}async function H(){const e=await j();D.value=e.length>0?e[0].webPath:null}async function I(){const e=R.value,a=S.value;if(!e||!a)return;a.width=e.videoWidth,a.height=e.videoHeight;const l=a.getContext("2d");if(!l)return;l.drawImage(e,0,0,a.width,a.height);const t=a.toDataURL("image/jpeg",.8).split(",")[1];await x(t),await H()}async function K(){E.value="user"===E.value?"environment":"user",await L()}const Q=()=>l.push("/tabs/gallery");return n(L),c(A),s(H),(e,l)=>(C(),u(r(o),null,{default:i(()=>[v(r(m),null,{default:i(()=>[v(r(d),null,{default:i(()=>[v(r(f),{class:"lumo-title-center"},{default:i(()=>l[0]||(l[0]=[g("LUMO",-1)])),_:1,__:[0]})]),_:1})]),_:1}),v(r(k),{fullscreen:!0,class:"camera-content"},{default:i(()=>[h("video",{ref_key:"videoRef",ref:R,autoplay:"",playsinline:"",class:"camera-preview"},null,512),h("canvas",{ref_key:"canvasRef",ref:S,style:{display:"none"}},null,512),h("div",a,[h("div",M,[D.value?(C(),y("img",{key:0,src:D.value,class:"camera-thumbnail",onClick:Q},null,8,O)):p("",!0)]),h("div",{class:"camera-slot"},[h("button",{class:"camera-button",onClick:I})]),h("div",P,[v(r(_),{icon:r(w),class:"camera-toggle",onClick:K},null,8,["icon"])])])]),_:1})]),_:1}))}}))}}});
